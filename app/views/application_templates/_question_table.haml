%table
  %thead
    %tr
      %th Short name
      %th Prompt
      %th Response type
      %th Required?
      %th= #submit
      %th= #move up
      %th= #move down
      %th= #remove question
  - @template.questions.each do |question|
    %tr
      = form_for question, url: {controller: :questions, action: :update, id: question.id} do |f|
        %td= f.text_field :name, max_length: 20
        %td= f.text_area :prompt, required: true, size: '50x4'
        %td= f.select :data_type,
          options_for_select(Question::DATA_TYPES, question.data_type)
        %td= f.check_box :required
        %td
          = f.submit 'Save question'
      %td
        - unless question == @template.questions.first
          = form_tag controller: :questions, action: :move, direction: :up, id: question.id do
            = submit_tag 'Move up'
      %td
        - unless question == @template.questions.last
          = form_tag controller: :questions, action: :move, direction: :down, id: question.id do
            = submit_tag 'Move down'
      %td= #button_to 'Remove question'
  %tr
    %td#new_question_header{colspan: 8} Add new question:
  = form_for Question.new, url: {controller: :questions, action: :create} do |f|
    %tr
      %td= f.text_field :name, maxlength: 20#, autofocus: true
      %td= f.text_area :prompt, required: true, size: '50x4'
      %td= f.select :data_type,
        options_for_select(Question::DATA_TYPES)
      %td= f.check_box :required
      %td
        = f.hidden_field :application_template_id, value: @template.id
        = f.hidden_field :number, value: @template.questions.count + 1
        = f.submit 'Save question'
      %td= #move up, not used for new
      %td= #move down, not used for new
      %td= #remove question, not used for new
